import { useRef } from 'react';

interface TimeBoxProps {
  value: string;
  onChange?: (value: string) => void;
  placeholderText?: string;
  disabled?: boolean;
  name?: string;
  id?: string;
}

const TimeIcon = () => (
  <svg
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 16 16"
    height={16}
    width={16}
    aria-hidden="true"
    focusable="false"
    className="text-[#38A169]"
  >
    <g fill="none" fillRule="nonzero">
      <path
        d="M16 0v16H0V0h16ZM8.395333333333333 15.505333333333333l-0.007333333333333332 0.0013333333333333333 -0.047333333333333324 0.023333333333333334 -0.013333333333333332 0.0026666666666666666 -0.009333333333333332 -0.0026666666666666666 -0.047333333333333324 -0.023333333333333334c-0.006666666666666666 -0.0026666666666666666 -0.012666666666666666 -0.0006666666666666666 -0.016 0.003333333333333333l-0.0026666666666666666 0.006666666666666666 -0.011333333333333334 0.2853333333333333 0.003333333333333333 0.013333333333333332 0.006666666666666666 0.008666666666666666 0.06933333333333333 0.049333333333333326 0.009999999999999998 0.0026666666666666666 0.008 -0.0026666666666666666 0.06933333333333333 -0.049333333333333326 0.008 -0.010666666666666666 0.0026666666666666666 -0.011333333333333334 -0.011333333333333334 -0.2846666666666666c-0.0013333333333333333 -0.006666666666666666 -0.005999999999999999 -0.011333333333333334 -0.011333333333333334 -0.011999999999999999Zm0.17666666666666667 -0.07533333333333334 -0.008666666666666666 0.0013333333333333333 -0.12333333333333332 0.062 -0.006666666666666666 0.006666666666666666 -0.002 0.007333333333333332 0.011999999999999999 0.2866666666666666 0.003333333333333333 0.008 0.005333333333333333 0.004666666666666666 0.134 0.062c0.008 0.0026666666666666666 0.015333333333333332 0 0.019333333333333334 -0.005333333333333333l0.0026666666666666666 -0.009333333333333332 -0.02266666666666667 -0.4093333333333333c-0.002 -0.008 -0.006666666666666666 -0.013333333333333332 -0.013333333333333332 -0.014666666666666665Zm-0.4766666666666666 0.0013333333333333333a0.015333333333333332 0.015333333333333332 0 0 0 -0.018 0.004l-0.004 0.009333333333333332 -0.02266666666666667 0.4093333333333333c0 0.008 0.004666666666666666 0.013333333333333332 0.011333333333333334 0.016l0.009999999999999998 -0.0013333333333333333 0.134 -0.062 0.006666666666666666 -0.005333333333333333 0.0026666666666666666 -0.007333333333333332 0.011333333333333334 -0.2866666666666666 -0.002 -0.008 -0.006666666666666666 -0.006666666666666666 -0.12266666666666666 -0.06133333333333333Z"
        strokeWidth="0.6667"
      ></path>
      <path
        fill="currentColor"
        d="M8 1.3333333333333333c3.6819999999999995 0 6.666666666666666 2.9846666666666666 6.666666666666666 6.666666666666666s-2.9846666666666666 6.666666666666666 -6.666666666666666 6.666666666666666S1.3333333333333333 11.681999999999999 1.3333333333333333 8 4.318 1.3333333333333333 8 1.3333333333333333Zm0 2.6666666666666665a0.6666666666666666 0.6666666666666666 0 0 0 -0.6666666666666666 0.6666666666666666v3.333333333333333a0.6666666666666666 0.6666666666666666 0 0 0 0.1953333333333333 0.47133333333333327l2 2a0.6666666666666666 0.6666666666666666 0 0 0 0.9426666666666665 -0.9426666666666665L8.666666666666666 7.724V4.666666666666666a0.6666666666666666 0.6666666666666666 0 0 0 -0.6666666666666666 -0.6666666666666666Z"
        strokeWidth="0.6667"
      ></path>
    </g>
  </svg>
);

const TimeBox = ({ value, onChange, placeholderText, disabled, name, id }: TimeBoxProps) => {
  const inputRef = useRef<HTMLInputElement>(null);

  const handleIconClick = () => {
    if (!disabled) {
      inputRef.current?.showPicker();
    }
  };

  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {
    onChange?.(event.target.value);
  };

  return (
    <div
      className={`relative flex items-center border border-[#38A169] rounded-lg h-10 w-full ${
        disabled ? 'opacity-50 cursor-not-allowed' : ''
      }`}
    >
      <input
        ref={inputRef}
        type="time"
        id={id}
        name={name}
        className="text-[#38A169] w-full flex-grow h-full bg-transparent hide-date-icon focus:ring-0 focus:outline-none pl-3 pr-2"
        value={value}
        onChange={handleChange}
        disabled={disabled}
        data-placeholder={placeholderText}
      />
      <button
        type="button"
        onClick={handleIconClick}
        className="mr-3 flex h-full items-center text-[#38A169]"
        disabled={disabled}
        aria-label={placeholderText}
      >
        <TimeIcon />
      </button>
    </div>
  );
};

export default TimeBox;


